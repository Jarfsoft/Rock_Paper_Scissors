<html>
    <div id="result">YOU: 0 CPU: 0</div>
    <div id="CPU">CPU played: </div>
    <div id="buttons">
        <button type='button' id="1">Rock</button>
        <button type='button' id="2">Paper</button>
        <button type='button' id="3">Scissors</button>
    </div>
    <div id="win"></div>
</html>


<script>
  function computerPlay()
  {
      let n = Math.floor(Math.random() * 3) + 1;
      let play;
      if(n==1)
        play="rock";
      else if(n==2)
        play="paper";
      else
        play="scissors";
      return play;
  }
  function playRound(playerSelection, computerSelection)
  {
    let prev = document.querySelector("#result");
    let pla = prev.textContent[5];
    let com = prev.textContent[12];
      if("rock" == playerSelection.toLowerCase() || "paper" == playerSelection.toLowerCase() || "scissors" == playerSelection.toLowerCase())
      {
        if(playerSelection==computerSelection)
        {
            document.querySelector("#win").textContent = "Draw, you both went for "+ computerSelection+".";
        }
        else
        {
            if("rock" == playerSelection.toLowerCase())
            {
                if(computerSelection == "scissors")
                {
                    pla++;
                    document.querySelector("#win").textContent = "You win! Rock beats Scissors.";
                }
                else 
                {
                    com++;
                    document.querySelector("#win").textContent = "You lose! Paper beats Rock.";
                }
            }
            else if("paper" == playerSelection.toLowerCase())
            {
                if(computerSelection == "rock")
                {
                    pla++;
                    document.querySelector("#win").textContent = "You win! Paper beats Rock.";
                }
                else
                {
                    com++;
                    document.querySelector("#win").textContent = "You lose! Scissors beats Paper.";
                }
                    
            }
            else
            {
                if(computerSelection == "paper")
                {
                    pla++;
                    document.querySelector("#win").textContent = "You win! Scissors beats Paper.";
                }
                else
                {
                    com++;
                    document.querySelector("#win").textContent = "You lose! Rock beats Scissors.";
                }
            }
        }
      }
      else
        console.log("Not a valid input. Just 'Rock/Paper/Scissors'");
    if(pla==5)
    {
        document.querySelector("#win").textContent = "Game Set! You win. :)";
        com=0;
        pla=0;
    }
    else if(com==5)
    {
        document.querySelector("#win").textContent = "Game Set! You lose. :(";
        com=0;
        pla=0;
    }
    document.querySelector("#CPU").textContent = "CPU played: " + computerSelection;
    prev.textContent = "YOU: "+ pla +" CPU: "+ com;
    return;
  }

  const buttons = document.querySelectorAll('button');
  buttons.forEach((button) => {
    button.addEventListener('click', () => {
        let input;
        if(button.id == "1")
        {
            input = "rock";
        }
        else if(button.id == "2")
        {
            input = "paper";
        }
        else
        {
            input = "scissors";
        }
        playRound(input,computerPlay());
    });
  });
</script>